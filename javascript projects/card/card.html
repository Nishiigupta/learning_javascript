<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css" integrity="sha512-HK5fgLBL+xu6dm/Ii3z4xhlSUyZgTT9tuc/hSrtw6uzJOvgRr2a9jyxxT1ely+B+xFAmJKVSTbpM/CuL7qxO8w==" crossorigin="anonymous" />
    <link rel="stylesheet" href="card.css">
    <title>My booking history</title>
    <body>
      <!-- Start of the navbar-->
       <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <!-- <div class="mx-2">
              <a href="#" data-show="show-side-navigation1" class="btn fa fa-bars show-side-btn"></a>
          </div> -->
        <!-- Image and text -->
        <a class="navbar-brand mx-4" href="/">
          <img
            src="https://getbootstrap.com/docs/4.0/assets/brand/bootstrap-solid.svg"
            width="30"
            height="30"
            class="d-inline-block align-top"
            alt=""
          />
          Geo-Parking
        </a>
  
        <button
          class="navbar-toggler"
          type="button"
          data-toggle="collapse"
          data-target="#navbarTogglerDemo02"
          aria-controls="navbarTogglerDemo02"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
  
        <div class="collapse navbar-collapse" id="navbarTogglerDemo02">
          <ul class="navbar-nav mr-auto">
            <li class="nav-item"></li>
          </ul>
  
          <ul class="navbar-nav justify-content-end mt-2 mt-lg-0">
            <li class="nav-item active">
              <a class="nav-link" href="/"
                >Home <span class="sr-only">(current)</span></a
              >
            </li>
  
            <li
              class="nav-item dropdown active"
              id="navbarDropdownAuthenticated"
              style="display: none"
            >
              <a
                class="nav-link dropdown-toggle"
                href="#"
                id="navbarDropdownMenuLink"
                data-toggle="dropdown"
                aria-haspopup="true"
                aria-expanded="false"
              >
                My Profile
              </a>
              <div
                class="dropdown-menu"
                aria-labelledby="navbarDropdownMenuLink"
              >
                <button
                  type="button"
                  class="dropdown-item"
                  data-toggle="modal"
                  data-target="#EditProfileInfoModal"
                  style="cursor: pointer"
                >
                  Edit Info
                </button>
                <a
                  class="dropdown-item"
                  href="/customer/my-bookings"
                  >My Bookings</a
                >
                <div class="dropdown-divider"></div>
                <a class="dropdown-item" href="/logout">Logout</a>
              </div>
            </li>
  
            <li class="nav-item">
              <a class="nav-link active" href="/contact-us"
                >Contact-us</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link active" href="/about">About</a>
            </li>
            <li class="nav-item active" id="navbarUnAuthenticated">
              <a class="nav-link" href="/oauth2/authorization/google"
                >Sign-in/up
                <span class="sr-only">(current)</span></a
              >
            </li>
          </ul>
        </div>
      </nav>

      <!-- end of the navbar-->

      <!-- card portion starts here-->

    <div class="co-first" id="first">
        <div class="card order-card" style="width: 18rem;">
        
        <div class="card-body">
        <img class="card-img-top" style="opacity: 0.7; border-radius: 1rem;" src="https://b.kisscc0.com/20180517/rhq/kisscc0-parking-transport-car-park-house-traffic-5afd7a09a9a3a4.2002531015265612896949.jpg" alt="Card image" style="width:100%">
        <div class="card-img-overlay"> </div>

        <h4 class="card-title-first" style="text-align: center; color: rgb(80, 49, 80);  font-family: -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Helvetica Neue",sans-serif;><b>VEHICLE ZONE</b></h4>
          <h5 class="card-title" style="text-align: center; color: brown;  font-family: -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Helvetica Neue",sans-serif;><b>PUNE</b></h5>
            <hr>
          <p class="card-text" style="text-align: center; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;">
            <b> 12/02/2021 - 12:10 pm <br>
            12/02/2021 - 1:20 pm </b><br>
        </p>
        <hr>
        <button type="button" class="btn" style="border-radius: 2rem;" style="background-color:rgb(209, 235, 224);" ><b> Amount</b> <i style="color: green;" class="fas fa-check-circle"></i></button>
      <!--   <button type="button" class="btn" style="border-radius: 2rem;" style="background-color:rgb(209, 235, 224);" ><b> Amount</b> <i style="color: red;" class="fas fa-times-circle"></i></button> -->

          <a href="#" class="btn btn-primary" style="border-radius:2rem;  font-family: -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Helvetica Neue",sans-serif; style="text-align: center;">Receipt Link</a>
        </div>
        </div>
    </div>
        
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js" integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0" crossorigin="anonymous"></script>
    
    <script>

        // making the api call using XMLHttpRequest and xhr
        const xhr = new XMLHttpRequest();
        const url = "/api/secured/my-bookings";
        xhr.open("GET",url,true);

        xhr.onreadystatechange = function(){
          if(this.readyState===4 && this.status===200){
            console.log(this.response);
            generatePreviousOrders(this.response);
          }
        };

        // a function that takes in the json response and dynamically generates the data
        function generatePreviousOrders(bookingdata){
        const value = document.querySelector('#first');
        const card = document.createElement('div');
        card.className = "card order-card";
        for(let i =0;i<bookingdata.length;i++){
            card.innerHTML+= `
            <div class="card-body">
            <img class="card-img-top" style="opacity: 0.7; border-radius: 1rem;" src="https://b.kisscc0.com/20180517/rhq/kisscc0-parking-transport-car-park-house-traffic-5afd7a09a9a3a4.2002531015265612896949.jpg" alt="Card image" style="width:100%">
            <div class="card-img-overlay"> </div>

            <h4 class="card-title-first"><b>VEHICLE ZONE</b></h4>
            <h5 class="card-title"><b>PUNE</b></h5>
            <hr>
            <p class="card-text" style="text-align: center; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;">
            <b>${bookingdata[i].startedtime}<br>
            ${bookingdata[i].toTimeDate} </b><br>
            </p>
            <hr>
            <button type="button" class="btn" style="border-radius: 2rem;" style="background-color:rgb(209, 235, 224);" ><b> Amount</b> <i style="color: green;" class="fas fa-check-circle"></i></button>
            <!--   <button type="button" class="btn" style="border-radius: 2rem;" style="background-color:rgb(209, 235, 224);" ><b> Amount</b> <i style="color: red;" class="fas fa-times-circle"></i></button> -->

            <a href="#" class="btn btn-primary" style="border-radius:2rem;  font-family: -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Helvetica Neue",sans-serif; style="text-align: center;">Receipt Link</a>
            </div>`;
          value.appendChild(card);
        }
      }
     </script>
  </body>
</html>